import { articles, authors } from "../data"

export default function HomeScreen({
  onOpenArticle,
  onOpenAuthor,
}: {
  onOpenArticle: (id: string) => void
  onOpenAuthor: (id: string) => void
}) {
  const findAuthor = (name: string) => {
    return authors.find((a) => a.name === name)
  }
  const hero = articles[0]
  const rest = articles.slice(1)

  return (
    <div className="pb-2">
      {/* Header */}
      <div className="px-5 pt-2 pb-3 text-center">
        <h1 className="inline-block">
          <svg
            width="186"
            height="42"
            viewBox="0 0 186 42"
            fill="none"
            className="text-dispatch-red"
            aria-label="The Dispatch"
          >
            <path d="M7.82709 5.5272C7.82709 4.98361 7.6898 4.84756 5.95045 4.84756C3.79921 4.84756 2.79209 6.84119 2.05985 8.60817C1.51053 10.0126 1.14442 11.3266 0.595091 11.3266C0.137294 11.3266 0 11.1001 0 10.2393C0 10.0579 0.0457629 9.65021 0.0915274 9.10662C0.228821 7.65673 0.503406 5.5272 0.823909 3.89627C1.05273 2.76363 1.28156 2.08398 1.64782 2.08398C2.15138 2.08398 2.28868 2.44638 2.47174 2.85423C2.65479 3.21662 2.88377 3.57917 3.52447 3.57917H16.3408C17.8054 3.57917 18.309 3.30737 18.5836 2.85423C18.8124 2.53698 18.9956 2.08398 19.499 2.08398C19.9568 2.08398 20.0941 2.49168 20.0941 3.39782C20.0941 3.94157 20.0483 4.48516 20.0483 5.02891C20.0483 6.29745 19.911 8.29092 19.8195 9.55961C19.6822 10.9642 19.4076 11.372 18.9956 11.372C18.3547 11.372 18.2175 10.0581 17.9429 8.65362C17.4851 6.79604 16.7986 4.98376 14.4642 4.89301C13.9148 4.89301 13.4114 4.84771 13.0452 4.84771C12.1755 4.84771 12.0382 5.07436 12.0382 5.48205V28.5889C12.0382 29.9482 12.5418 30.5825 13.1825 30.6731C14.4182 30.8996 15.2879 30.9449 15.2879 31.4886C15.2879 32.0777 14.7386 32.123 14.1894 32.123C13.4113 32.123 12.5416 31.9418 9.97833 31.9418C6.86574 31.9418 6.2708 32.123 5.58418 32.123C4.8518 32.123 4.57721 31.9418 4.57721 31.5339C4.57721 31.081 4.76026 30.8543 6.31656 30.6731C7.59827 30.5372 7.82709 29.9029 7.82709 28.3171V5.5272Z" fill="currentColor"></path>
            <path d="M23.1691 4.48556C23.1691 3.62472 22.9403 3.35292 21.9333 3.17157C21.1094 2.99037 20.8348 2.94507 20.8348 2.53723C20.8348 2.08423 21.1552 2.03878 22.1164 1.76699C24.0388 1.13264 25.0458 0.679647 25.6866 0.40785C26.2817 0.135902 26.4648 0 26.7394 0C26.9224 0 27.0139 0.181199 27.0139 0.815543V13.7283C27.0139 14.0001 27.1055 14.136 27.2885 14.136C27.4716 14.136 27.6546 14.0001 27.8377 13.8642C28.8447 12.9581 30.584 11.1458 33.1932 11.1458C36.0768 11.1458 38.3655 13.0034 38.5028 16.5828V28.997C38.5028 30.3108 39.0064 30.8092 39.9218 30.9451C40.7 31.0812 40.9745 31.2171 40.9745 31.5795C40.9745 31.9873 40.6542 32.1232 40.2879 32.1232C40.0591 32.1232 38.8232 31.942 36.6719 31.942C34.2459 31.942 33.7425 32.1232 33.239 32.1232C32.6897 32.1232 32.4151 31.9873 32.4151 31.5342C32.4151 31.1718 32.6897 31.0812 33.1475 30.9904C34.2002 30.7639 34.658 30.4467 34.658 29.4501V17.0811C34.658 15.9937 34.3834 15.1329 33.8798 14.5439C33.2847 13.8189 32.4151 13.4565 31.2708 13.4565C30.2181 13.4565 29.1196 13.9097 28.2957 14.5892C27.5175 15.2688 27.0141 16.1749 27.0141 17.1717V29.2233C27.0141 30.22 27.5175 30.7185 28.7992 30.9903C29.4858 31.1263 29.6231 31.2622 29.6231 31.5793C29.6231 31.9872 29.3026 32.1231 28.9365 32.1231C28.5704 32.1231 28.1126 31.9419 24.9544 31.9419C22.5742 31.9419 22.1623 32.1231 21.4757 32.1231C21.1094 32.1231 20.7891 31.9419 20.7891 31.534C20.7891 31.1716 21.1094 30.945 21.5214 30.8544C22.8947 30.7185 23.1693 30.2653 23.1693 28.6343L23.1691 4.48556Z" fill="currentColor"></path>
            <path d="M45.3574 20.4798C44.5335 20.4798 44.2132 20.7969 44.2132 21.5218C44.2132 26.1884 46.2271 29.813 49.3855 29.813C51.4909 29.813 52.7269 28.771 53.3677 27.2305C53.7338 26.4149 53.8254 25.8259 54.1916 25.8259C54.4662 25.8259 54.6494 25.9618 54.6494 26.4602C54.6494 27.1399 54.4206 27.9554 54.0086 28.7257C53.0931 30.674 50.9877 32.1237 48.3786 32.1237C43.2063 32.1237 40.0938 27.7742 40.0938 21.7483C40.0938 14.2726 43.9386 10.4668 48.3327 10.4668C51.9945 10.4668 54.6493 13.1852 54.6493 17.7612C54.6493 20.2984 54.6035 20.4797 53.3218 20.4797L45.3574 20.4798ZM44.3047 17.9879C44.3047 18.8487 44.442 19.0752 46.044 19.0752C46.9137 19.0752 47.6461 18.9845 48.2868 18.8939C49.6601 18.7127 50.5755 18.3501 50.8043 17.9877C51.1704 17.6252 51.3079 17.1269 51.3079 16.0847C51.3079 13.4116 50.0719 11.7805 48.2868 11.7805C45.9524 11.7805 44.3047 14.7707 44.3047 17.9424V17.9879Z" fill="currentColor"></path>
            <path d="M64.2743 6.61398C64.2743 5.70784 63.9539 5.39074 63.13 5.25485C62.8097 5.20955 62.3976 5.16424 61.8485 5.11894C61.3449 5.07365 61.0703 4.98305 61.0703 4.6658C61.0703 4.21266 61.2991 4.12205 62.7639 3.66906C65.0067 3.03471 67.2496 2.85352 70.2705 2.85352C74.207 2.85352 77.411 4.21265 79.6539 6.70458C81.9426 9.19666 83.1784 12.8211 83.1784 17.216C83.1784 26.4588 79.3335 32.1221 71.4149 32.1221C69.7213 32.1221 68.0735 31.9409 65.968 31.9409C64.2287 31.9409 62.947 32.1221 61.9858 32.1221C61.3907 32.1221 61.1161 31.8956 61.1161 31.4878C61.1161 30.944 61.3907 30.8534 62.5351 30.6722C63.8166 30.491 64.2744 29.8567 64.2744 28.3162L64.2743 6.61398ZM68.4854 27.8632C68.4854 29.5849 69.1262 30.8534 71.2317 30.8534C73.5661 30.8534 75.397 29.9473 76.6786 27.546C77.8229 25.5072 78.4637 22.3356 78.4637 17.669C78.4637 7.65617 75.0765 4.21265 70.8654 4.21265C68.943 4.21265 68.4852 4.8017 68.4852 6.47808L68.4854 27.8632Z" fill="currentColor"></path>
            <path d="M86.3914 16.0387C86.3914 14.8608 86.071 14.5435 84.6978 14.2263C84.24 14.1357 84.0569 13.9545 84.0569 13.6827C84.0569 13.3201 84.4231 13.1389 85.5217 12.7765C86.9865 12.3234 88.085 11.7345 89.0004 11.3266C89.4123 11.0548 89.7328 10.8736 89.8701 10.8736C90.1447 10.8736 90.2362 11.0548 90.2362 11.5533V13.7281V28.5889C90.2362 29.9482 90.282 30.5372 91.7925 30.8543C92.6164 31.081 92.891 31.1716 92.891 31.5793C92.891 31.9418 92.708 32.123 92.1129 32.123C91.2432 32.123 90.4193 31.9418 88.3138 31.9418C86.1168 31.9418 85.2471 32.123 84.5147 32.123C84.1029 32.123 83.8281 31.9418 83.8281 31.5793C83.8281 31.2169 84.0112 30.9902 84.652 30.8543C86.2083 30.5825 86.3914 30.4012 86.3914 28.7703V16.0387ZM88.3138 8.15522C87.1695 8.15522 86.1626 7.20378 86.1626 5.48209C86.1626 3.71511 87.1695 2.76367 88.3596 2.76367C89.5955 2.76367 90.6025 3.71511 90.6025 5.48209C90.6025 7.20378 89.5955 8.15522 88.3596 8.15522H88.3138Z" fill="currentColor"></path>
            <path d="M93.7111 16.5818C93.7111 12.5494 97.144 10.873 100.669 10.873C102.088 10.873 103.506 11.0995 104.376 11.598C104.559 11.6886 104.605 12.0058 104.696 12.6853C104.742 13.0932 104.742 13.6368 104.742 14.3617V15.5396C104.696 16.3099 104.559 16.6723 104.193 16.6723C103.644 16.6723 103.552 15.902 102.911 14.3163C102.408 13.093 101.721 12.1414 100.302 12.1414C98.5171 12.1414 97.2354 13.3647 97.2354 14.9505C97.2354 17.1251 99.3868 18.2578 101.538 19.6624C103.689 21.0215 105.795 22.6526 105.795 25.8241C105.795 30.2642 102.545 32.5297 98.2883 32.5297C96.9151 32.5297 95.9996 32.3938 95.2672 32.1671C94.9011 32.0765 94.5806 31.9859 94.306 31.8953C94.0314 31.7594 93.8484 31.5328 93.7567 30.5362C93.7109 29.9925 93.7109 29.1769 93.7109 27.9537C93.7109 25.8696 93.8482 25.3712 94.2603 25.3712C94.8096 25.3712 94.9011 25.9602 95.5877 27.9537C96.3201 29.8113 97.3729 31.2611 99.0207 31.2611C100.989 31.2611 102.179 29.9019 102.179 27.9537C102.179 25.2353 100.074 24.0119 97.968 22.6527C95.8166 21.3389 93.7111 19.8437 93.7111 16.6268V16.5818Z" fill="currentColor"></path>
            <path d="M111.984 38.6919C111.984 40.187 112.625 40.5042 114.044 40.776C114.822 40.9119 115.096 40.9573 115.096 41.5009C115.096 41.7729 114.776 41.9994 113.861 41.9994C112.899 41.9994 112.213 41.8182 110.336 41.8182C108.643 41.8182 107.407 41.9994 106.537 41.9994C105.713 41.9994 105.484 41.8182 105.484 41.4556C105.484 41.1385 105.53 40.9119 106.171 40.776C107.91 40.3683 108.139 40.3229 108.139 38.42V16.4459C108.139 15.2227 107.956 14.9962 107.132 14.7243C106.217 14.4525 105.896 14.3619 105.896 14.0899C105.896 13.6822 106.125 13.5462 106.857 13.3197C108.505 12.5947 109.741 11.9151 110.519 11.4621C111.114 11.0995 111.343 10.873 111.526 10.873C111.709 10.873 111.847 11.0089 111.847 11.5074V13.2744C111.847 13.5915 111.938 13.7275 112.121 13.7275C112.35 13.7275 112.762 13.2291 113.357 12.6855C114.135 11.9605 115.234 11.0997 116.607 11.0997C120.589 11.0997 123.473 15.6304 123.473 21.9282C123.473 27.637 120.498 32.5301 115.92 32.5301C114.822 32.5301 113.998 32.2129 113.357 31.9864C112.854 31.7599 112.533 31.5785 112.304 31.5785C111.984 31.5785 111.984 31.8958 111.984 32.4394V38.6919ZM119.308 21.9735C119.308 16.6726 117.889 13.4557 115.279 13.4557C114.41 13.4557 113.586 13.8183 112.991 14.3619C112.35 14.8603 111.984 15.5851 111.984 16.3553V27.7729C111.984 29.0868 112.304 29.9931 112.854 30.4914C113.403 31.035 114.135 31.3069 114.913 31.3069C117.339 31.3069 119.308 28.6791 119.308 22.0188V21.9735Z" fill="currentColor"></path>
            <path d="M134.497 14.9524C134.497 12.8229 133.902 12.1434 132.712 12.1434C130.607 12.1434 129.6 13.8198 128.959 16.0399C128.639 17.0366 128.089 17.8069 127.449 18.3052C126.899 18.713 126.304 18.9397 125.618 18.9397C124.702 18.9397 124.336 18.6224 124.336 17.7163C124.336 15.0432 128.227 10.875 133.811 10.875C135.55 10.875 136.649 11.1015 137.335 11.6905C138.068 12.2343 138.342 13.1404 138.342 14.3637V27.9558C138.342 29.0884 138.754 29.5869 139.532 29.5869C140.356 29.5869 140.723 29.179 140.906 28.726C141.135 28.273 141.226 27.8199 141.547 27.8199C141.821 27.8199 141.913 28.0464 141.913 28.5901C141.913 29.5869 140.631 32.396 137.839 32.396C135.871 32.396 135.367 30.8556 135.047 29.9494C134.91 29.5869 134.772 29.3149 134.543 29.3149C134.177 29.3149 133.491 30.1758 132.392 30.9913C131.385 31.8068 130.012 32.5318 128.181 32.5318C126.075 32.5318 124.519 31.0821 124.519 28.4088C124.519 26.1434 125.755 24.5576 129.6 22.0658C131.156 21.0691 132.209 20.4347 132.941 19.891C134.131 19.166 134.498 18.713 134.498 17.7161L134.497 14.9524ZM128.547 27.6838C128.547 29.3602 129.417 30.2211 130.698 30.2211C131.659 30.2211 132.483 29.6773 133.353 28.8619C134.177 28.0464 134.497 27.4573 134.497 26.3247V21.2957C134.497 20.7973 134.406 20.7067 134.177 20.7067C133.948 20.7067 133.719 20.752 133.124 21.2049C132.163 21.8394 131.248 22.6095 130.561 23.3798C129.325 24.6483 128.547 26.0529 128.547 27.6387V27.6838Z" fill="currentColor"></path>
            <path d="M146.938 28.0448C146.938 29.7212 147.487 30.0838 148.357 30.0838C149.181 30.0838 149.685 29.4494 150.051 28.8605C150.417 28.2716 150.646 27.6826 151.058 27.6826C151.332 27.6826 151.515 27.8185 151.515 28.1356C151.515 28.7246 150.6 32.4851 146.938 32.4851C145.702 32.4851 144.741 32.1679 144.1 31.4884C143.414 30.8087 143.093 29.7214 143.093 28.2716V13.7279C143.093 13.3201 142.864 13.1389 142.59 13.0481C142.315 13.0028 141.857 13.0028 141.537 13.0028C141.125 12.9575 140.805 12.9122 140.805 12.4138C140.805 12.142 141.079 11.8247 141.674 11.2359C142.956 10.1032 144.009 8.87983 145.611 6.16155C146.069 5.34601 146.16 5.07422 146.481 5.07422C146.755 5.07422 146.938 5.16482 146.938 6.07096V10.4658C146.938 11.1907 147.167 11.4625 147.854 11.4625H149.913C150.691 11.4625 150.92 11.5984 150.92 12.2327C150.92 12.9124 150.737 13.1842 149.822 13.1842H147.671C147.121 13.1842 146.938 13.3654 146.938 14.0903L146.938 28.0448Z" fill="currentColor"></path>
            <path d="M168.192 4.48556C168.192 3.62472 167.964 3.35292 166.957 3.17157C166.133 2.99037 165.858 2.94507 165.858 2.53723C165.858 2.08423 166.179 2.03878 167.14 1.76699C169.062 1.13264 170.069 0.679647 170.71 0.40785C171.305 0.135902 171.488 0 171.763 0C171.946 0 172.037 0.181199 172.037 0.815543V13.7283C172.037 14.0001 172.129 14.136 172.312 14.136C172.495 14.136 172.678 14.0001 172.861 13.8642C173.868 12.9581 175.607 11.1458 178.217 11.1458C181.1 11.1458 183.389 13.0034 183.526 16.5828V28.997C183.526 30.3108 184.03 30.8092 184.945 30.9451C185.723 31.0812 185.998 31.2171 185.998 31.5795C185.998 31.9873 185.678 32.1232 185.311 32.1232C185.083 32.1232 183.847 31.942 181.695 31.942C179.269 31.942 178.766 32.1232 178.262 32.1232C177.713 32.1232 177.439 31.9873 177.439 31.5342C177.439 31.1718 177.713 31.0812 178.171 30.9904C179.224 30.7639 179.681 30.4467 179.681 29.4501V17.0811C179.681 15.9937 179.407 15.1329 178.903 14.5439C178.308 13.8189 177.439 13.4565 176.294 13.4565C175.242 13.4565 174.143 13.9097 173.319 14.5892C172.541 15.2688 172.038 16.1749 172.038 17.1717V29.2233C172.038 30.22 172.541 30.7185 173.823 30.9903C174.509 31.1263 174.647 31.2622 174.647 31.5793C174.647 31.9872 174.326 32.1231 173.96 32.1231C173.594 32.1231 173.136 31.9419 169.978 31.9419C167.598 31.9419 167.186 32.1231 166.499 32.1231C166.133 32.1231 165.812 31.9419 165.812 31.534C165.812 31.1716 166.133 30.945 166.545 30.8544C167.918 30.7185 168.193 30.2653 168.193 28.6343V4.48556H168.192Z" fill="currentColor"></path>
            <path d="M151.5 22.4265C151.5 15.721 155.482 10.873 160.838 10.873C162.028 10.873 163.447 11.0542 164.408 11.598C165.506 12.187 165.552 12.3682 165.552 13.5462C165.552 14.2258 165.598 14.7241 165.598 15.2679C165.598 15.721 165.506 16.4458 165.461 16.8536C165.323 17.7598 165.003 17.8957 164.362 17.8957C163.584 17.8957 163.447 16.8083 162.714 14.8602C162.119 13.2744 161.57 12.504 160.243 12.504C157.679 12.504 155.62 15.902 155.62 20.75C155.62 27.4554 157.908 30.0381 160.655 30.0381C162.302 30.0381 163.401 29.3584 164.271 27.9991C164.866 27.0024 165.232 25.779 165.598 25.779C165.918 25.779 166.102 26.0509 166.102 26.4133C166.102 28.8601 163.904 32.53 159.419 32.53C154.521 32.53 151.5 28.4523 151.5 22.4718L151.5 22.4265Z" fill="currentColor"></path>
          </svg>
        </h1>
      </div>

      {/* Hero article */}
      <button
        onClick={() => onOpenArticle(hero.id)}
        className="relative mx-4 block overflow-hidden rounded-xl text-left"
      >
        <img
          src={hero.imageUrl}
          alt=""
          className="h-[220px] w-full object-cover"
        />
        <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent" />
        <div className="absolute bottom-0 p-4">
          <span className="mb-2 inline-block rounded-sm border border-white/40 px-2 py-0.5 text-[10px] font-semibold tracking-wider text-white uppercase">
            {hero.category}
          </span>
          <h2 className="font-display text-[22px] leading-tight font-bold text-white">
            {hero.title}
          </h2>
          <p className="mt-1.5 text-[12px] text-white/70">
            <button
              onClick={(e) => {
                e.stopPropagation()
                const author = findAuthor(hero.author)
                if (author) onOpenAuthor(author.id)
              }}
              className="author-name font-medium text-white/90 hover:underline"
            >
              {hero.author}
            </button>{" "}
            / {hero.date}
          </p>
        </div>
      </button>

      {/* Section header */}
      <div className="mt-5 mb-1 px-5">
        <h3 className="text-[13px] font-bold tracking-widest text-dispatch-navy uppercase">
          Latest
        </h3>
      </div>

      {/* Article list */}
      <div className="px-5">
        {rest.map((article, i) => (
          <button
            key={article.id}
            onClick={() => onOpenArticle(article.id)}
            className="block w-full text-left"
          >
            <div
              className={`flex gap-4 py-3.5 ${i < rest.length - 1 ? "border-b border-dashed border-dispatch-border" : ""}`}
            >
              <div className="min-w-0 flex-1">
                <span className="mb-1 inline-block rounded-sm border border-dispatch-red/30 px-1.5 py-0.5 text-[9px] font-bold tracking-wider text-dispatch-red uppercase">
                  {article.category}
                </span>
                <h4 className="font-serif text-[16px] leading-snug font-semibold text-dispatch-navy">
                  {article.title}
                </h4>
                <p className="mt-1 text-[11px] text-dispatch-gray">
                  <button
                    onClick={(e) => {
                      e.stopPropagation()
                      const author = findAuthor(article.author)
                      if (author) onOpenAuthor(author.id)
                    }}
                    className="author-name font-medium text-dispatch-red hover:underline"
                  >
                    {article.author}
                  </button>{" "}
                  / {article.date}
                </p>
              </div>
              {article.imageUrl && (
                <img
                  src={article.imageUrl}
                  alt=""
                  className="h-[72px] w-[72px] shrink-0 rounded-lg object-cover"
                />
              )}
            </div>
          </button>
        ))}
      </div>
    </div>
  )
}
